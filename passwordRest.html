<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password - Library Management System</title>
    <link href="./styles/passwordReset.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="logo">
            <h1>ReadQuest Library Management System</h1>
        </div>
        
        <div class="card">
            <div class="card-header">
                <h2>Reset Your Password</h2>
            </div>
            
            <div class="card-body">
                <div class="step-indicator">
                    <div class="step active" id="step1">
                        1
                        <div class="step-line right"></div>
                    </div>
                    <div class="step" id="step2">
                        2
                        <div class="step-line left"></div>
                        <div class="step-line right"></div>
                    </div>
                    <div class="step" id="step3">
                        3
                        <div class="step-line left"></div>
                    </div>
                </div>
                
                <div id="messageContainer"></div>
                
                <!-- Step 1: Request Reset -->
                <div class="form-step active" id="step1Form">
                    <div class="form-group">
                        <label for="email">Enter your email address</label>
                        <input type="email" id="email" class="form-control" placeholder="your.email@example.com">
                    </div>
                    <button class="btn btn-primary" id="sendResetLink">Send Reset Link</button>
                    <div class="back-to-login">
                        <a href="login.html">Back to Login</a>
                    </div>
                </div>
                
                <!-- Step 2: Enter Token and New Password -->
                <div class="form-step" id="step2Form">
                    <div class="form-group">
                        <label for="token">Enter the OPT sent to your email</label>
                        <input type="text" id="token" class="form-control" placeholder="Paste your token here">
                    </div>
                    <div class="form-group">
                        <label for="newPassword">New Password</label>
                        <input type="password" id="newPassword" class="form-control" placeholder="Enter your new password">
                        <div class="password-strength">
                            <div class="password-strength-bar" id="passwordStrengthBar"></div>
                        </div>
                        <div class="password-requirements">
                            <ul>
                                <li id="reqLength" class="invalid">
                                    <span class="requirement-icon">✗</span> At least 8 characters
                                </li>
                                <li id="reqUppercase" class="invalid">
                                    <span class="requirement-icon">✗</span> One uppercase letter
                                </li>
                                <li id="reqLowercase" class="invalid">
                                    <span class="requirement-icon">✗</span> One lowercase letter
                                </li>
                                <li id="reqNumber" class="invalid">
                                    <span class="requirement-icon">✗</span> One number
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">Confirm New Password</label>
                        <input type="password" id="confirmPassword" class="form-control" placeholder="Confirm your new password">
                        <div id="passwordMatch" class="hidden" style="color: #e74c3c; font-size: 0.85rem; margin-top: 5px;">
                            Passwords do not match
                        </div>
                    </div>
                    <button class="btn btn-primary" id="resetPassword">Reset Password</button>
                    <button class="btn btn-secondary" id="backToStep1" style="margin-top: 10px;">Back</button>
                </div>
                
                <!-- Step 3: Success Message -->
                <div class="form-step" id="step3Form">
                    <div class="message success">
                        <p>Your password has been reset successfully!</p>
                    </div>
                    <p>You can now log in with your new password.</p>
                    <button class="btn btn-primary" id="goToLogin" style="margin-top: 20px;">Go to Login</button>
                </div>
            </div>
        </div>
    </div>

    <script src="./scripts/passwordReset.js"></script>
</body>
</html>